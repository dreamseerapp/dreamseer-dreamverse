<!DOCTYPE html>
<html style="height: 100vh; margin: 0; padding: 0;">
  <head>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/interactjs@1.9.11/dist/interact.min.js"></script>
    <style>
      html, body {
        height: 100vh;
        width: 100vw;
        margin: 0;
        padding: 0;
        display: flex;
      }

      #myDiv {
        flex: 1;
      }
    </style>
  </head>
  <body>
    <div id="myDiv"></div>
    <script>
      // Load the JSON file
      fetch('dreamverse_map.json')
        .then(response => response.json())
        .then(data => {
          const layout = data.layout;

          // Remove the "Zoom In" and "Zoom Out" buttons from the mode bar
          layout.modebar.buttons.splice(layout.modebar.buttons.indexOf('zoomIn2d'), 1);
          layout.modebar.buttons.splice(layout.modebar.buttons.indexOf('zoomOut2d'), 1);

          // Enable pinch zooming and touch rotation
          interact('#myDiv').gesturable({
            onmove: function(event) {
              const scale = 1 + event.ds;
              Plotly.relayout('myDiv', {
                'scene.camera.zoom': scale  // Adjust the zoom level
              });
            }
          });

          interact('#myDiv').draggable({
            onmove: function(event) {
              const x = event.dx;
              const y = event.dy;
              Plotly.relayout('myDiv', {
                'scene.camera.eye.x': '-=' + x,  // Adjust the X-axis rotation
                'scene.camera.eye.y': '+=' + y  // Adjust the Y-axis rotation
              });
            }
          });

          // Create the Plotly plot
          Plotly.newPlot('myDiv', data.data, layout, {
            responsive: true,
            modeBarButtonsToRemove: ['zoom2d', 'pan2d', 'select2d', 'lasso2d', 'autoScale2d', 'resetScale2d', 'hoverClosest3d', 'orbitRotation', 'tableRotation', 'resetCameraDefault3d', 'resetCameraLastSave3d', 'hoverClosestCartesian', 'hoverCompareCartesian', 'toggleSpikelines']
          });
        });
    </script>
  </body>
</html>
